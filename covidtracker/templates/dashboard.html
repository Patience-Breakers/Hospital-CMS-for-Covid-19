{% extends 'innerbase.html' %}
{% load static %}

{% block title %}Dashboard of the Covid Tracker{% endblock %}
{% block cssLinks %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

{% endblock %}


{% block body %}
<!--todo graph for active, recovered, decreased and on ventilator Starts here -->
<div class="container my-3">
    <script type="text/javascript">
        google.charts.load('current', {
            'packages': ['treemap']
        });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Location', 'Parent', 'Market trade volume (size)', 'Market increase/decrease (color)'],
                ['Patients', null, 0, 0],
                ['Recovered', 'Patients', 200, 1],
                ['Admitted', 'Patients', 100, 0],
                ['Ventilator', 'Patients', 50, -0.5],
                ['Decreased', 'Patients', 20, -1],



            ]);

            tree = new google.visualization.TreeMap(document.getElementById('chart_div'));

            tree.draw(data, {
                minColor: '#dc3545',
                midColor: '#ffc107',
                maxColor: '#28a745',
                headerHeight: 15,
                fontSize: 22,
                fontColor: 'black',
                showScale: false
            });
        }

    </script>
    <div id="chart_div" style="width: 100%; height: 120px;"></div>
</div>
<!--todo graph for active, recovered, decreased and on ventilator Ends here -->
<!--todo PieCharts & Bar Graph Starts Here -->

<div class="container">
    <div class="row ">
        <div class="col-md-2 align-self-center">
            <div class="list-group p-2" id="list-tab" role="tablist">
                <a class="list-group-item shadow m-1 list-group-item-action active" id="list-age-list"
                    data-bs-toggle="list" href="#list-age" role="tab" aria-controls="age"><b>Age</b></a>
                <a class="list-group-item shadow m-1  list-group-item-action" id="list-temp-list" data-bs-toggle="list"
                    href="#list-temperature" role="tab" aria-controls="temperature"><b>Temperature</b></a>
                <a class="list-group-item shadow m-1 list-group-item-action" id="list-days-list" data-bs-toggle="list"
                    href="#list-days" role="tab" aria-controls="days"><b>No of Days</b></a>
                <a class="list-group-item shadow m-1 list-group-item-action" id="list-beedused-list"
                    data-bs-toggle="list" href="#list-bedused" role="tab" aria-controls="bedused"><b>Beds Used</b></a>
            </div>
        </div>
        <div class="col-md-10 align-self-center text-center">
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="list-age" role="tabpanel" aria-labelledby="list-age-list">
                    <canvas id="myChart" width="40px" height="40px"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart').getContext('2d');
                        ctx.canvas.parentNode.style.width = "400px";
                        ctx.canvas.parentNode.style.height = "400px";

                        width = screen.width;
                        if (width < 600) {
                            ctx.canvas.parentNode.style.width = "300px";
                            ctx.canvas.parentNode.style.height = "300px";
                        }
                        var myChart = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: [


                                    {% for i in list_keys_age %}
                                        'AGE {{i}}',
                        {% endfor %}
                                ],
                        datasets: [{
                            label: '# of Votes',

                            data: [
                                {% for i in list_values_age %}
                                        {{ i }},
                        {% endfor %}


                        ],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(153, 102, 255, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                    borderWidth: 1
                                }]
                            },
                        options: {
                            scales: {

                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            }, scales: false,

                            }
                        });
                    </script>
                </div>

                <div class="tab-pane fade align-self-center" id="list-temperature" role="tabpanel"
                    aria-labelledby="list-temperature-list">
                    <canvas id="myChart2" width="40px" height="40px"></canvas>
                    <script>
                        var ctx = document.getElementById('myChart2').getContext('2d');
                        ctx.canvas.parentNode.style.width = "400px";
                        ctx.canvas.parentNode.style.height = "400px";

                        var myChart = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: [
                                    {% for i in list_keys_temp %}
                                        'Temperature {{i}}Â°F',
                        {% endfor %}    

                                ],
                        datasets: [{
                            label: '# of Votes',
                            data: [

                                {% for i in list_values_temp %}
                                        {{ i }},
                        {% endfor %}


                        ],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(153, 102, 255, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                    borderWidth: 1
                                }]
                            },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            }, scales: false,

                            }
                        });
                    </script>
                </div>
                <div class="tab-pane fade" id="list-days" role="tabpanel" aria-labelledby="list-days-list">

                </div>
                <div class="tab-pane fade" id="list-bedused" role="tabpanel" aria-labelledby="list-bedused-list">

                </div>
            </div>
        </div>
    </div>


</div>
<!--todo PieCharts Ends Here -->



{% endblock %}

{% block JS %}

{% endblock %}